import{c as O,r as W,a as U,p as P,u as $,j as e,P as V,G as f,T as S,F as C,I as T,S as k,M as b,A as G,b as x,d as B,e as K,B as g,f as m,Q as _,g as I,C as Q,h as q,i as Z,k as J,l as y,m as X,L as A,n as H,o as Y,q as R,s as ee,t as te,v as re,w as se,x as ne,y as oe,z as ie,D as ae,R as le,E,H as ce,J as de}from"./vendor-Dbgex_ps.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();const M=O({palette:{mode:"dark",primary:{main:"#20A79A",background:"#FFFFFF"},secondary:{main:"#FFFFFF",background:"#17786E"},background:{main:"#424242"},error:{main:W.A400}}}),D=O({palette:{mode:"light",primary:{main:"#12645B",background:"#FFFFFF"},secondary:{main:"#000000",background:"#22B9AA"},background:{main:"#17786E"},error:{main:W.A400}}}),ue="/dokimotes/assets/emojis-B1eQsO9R.tsv";var v=(t=>(t.ALL="all",t.ANIMATED="animated",t.STILL="still",t))(v||{}),F=(t=>(t.ALL="all",t.OFFICIAL="official",t.FANMADE="fan-made",t))(F||{});const he=t=>{const r=t.trim().split(`
`),i=r.shift().split("	").map(s=>s.trim());return r.map(s=>{const o=s.split("	");return i.reduce((l,d,u)=>{const n=o[u]===""?"Unknown":o[u];return d==="tags"?l[d]=n.split(",").map(c=>c.trim()):l[d]=n,l},{})})},me=async()=>{try{const r=await(await fetch(ue)).text();return he(r)}catch{return}},pe=t=>({theme:"system",density:"standard",timeFormat:"relative",transcriptHeight:"100%",enableTagHelper:!1,defaultOffset:-20,sidebarOpen:!0,devMode:!1,membershipKey:"",membershipInfo:null,useVirtualList:!1,setTheme:r=>t({theme:r}),setDensity:r=>t({density:r}),setTimeFormat:r=>t({timeFormat:r}),setTranscriptHeight:r=>t({transcriptHeight:r}),setEnableTagHelper:r=>t({enableTagHelper:r}),setDefaultOffset:r=>t({defaultOffset:r}),setSidebarOpen:r=>t({sidebarOpen:r}),setDevMode:r=>t({devMode:r}),setMembershipKey:r=>t({membershipKey:r}),setMembershipInfo:r=>t({membershipInfo:r}),setUseVirtualList:r=>t({useVirtualList:r})}),xe=t=>({searchText:"",setSearchText:r=>t({searchText:r}),emojiType:v.ALL,setEmojiType:r=>t({emojiType:r}),emojiSource:F.ALL,setEmojiSource:r=>t({emojiSource:r}),artistFilter:"",setArtistFilter:r=>t({artistFilter:r}),scrollIndex:0,setScrollIndex:r=>t({scrollIndex:r})}),j=U()(P((t,r,i)=>({...xe(t),...pe(t)}),{name:"live-transcript-settings",partialize:t=>({theme:t.theme,density:t.density,timeFormat:t.timeFormat,transcriptHeight:t.transcriptHeight,enableTagHelper:t.enableTagHelper,defaultOffset:t.defaultOffset,sidebarOpen:t.sidebarOpen,devMode:t.devMode,membershipKey:t.membershipKey,membershipInfo:t.membershipInfo,useVirtualList:t.useVirtualList})})),fe=({artists:t})=>{const{searchText:r,emojiType:i,emojiSource:a,artistFilter:s}=j($(n=>({searchText:n.searchText,emojiType:n.emojiType,emojiSource:n.emojiSource,artistFilter:n.artistFilter}))),o=j(n=>n.setSearchText),l=j(n=>n.setEmojiType),d=j(n=>n.setEmojiSource),u=j(n=>n.setArtistFilter);return e.jsx(V,{elevation:2,sx:{p:2,mb:2,borderRadius:2},children:e.jsxs(f,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[e.jsx(f,{size:{xs:12,md:3},children:e.jsx(S,{fullWidth:!0,label:"Search",variant:"outlined",value:r,onChange:n=>o(n.target.value),size:"small"})}),e.jsx(f,{size:{xs:6,md:3},children:e.jsxs(C,{fullWidth:!0,variant:"outlined",size:"small",children:[e.jsx(T,{id:"type-filter-label",children:"Type"}),e.jsxs(k,{labelId:"type-filter-label",id:"type-filter",value:i,label:"Type",name:"type",onChange:n=>l(n.target.value),children:[e.jsx(b,{value:v.ALL,children:"All Types"}),e.jsx(b,{value:v.ANIMATED,children:"Animated"}),e.jsx(b,{value:v.STILL,children:"Still"})]})]})}),e.jsx(f,{size:{xs:6,md:3},children:e.jsxs(C,{fullWidth:!0,variant:"outlined",size:"small",children:[e.jsx(T,{id:"source-filter-label",children:"Source"}),e.jsxs(k,{labelId:"source-filter-label",id:"source-filter",value:a,label:"Source",name:"source",onChange:n=>d(n.target.value),children:[e.jsx(b,{value:F.ALL,children:"All Sources"}),e.jsx(b,{value:F.OFFICIAL,children:"Official"}),e.jsx(b,{value:F.FANMADE,children:"Fan-made"})]})]})}),e.jsx(f,{size:{xs:12,md:3},children:e.jsx(C,{fullWidth:!0,variant:"outlined",size:"small",children:e.jsx(G,{id:"artist-filter",options:t,value:s||null,onChange:(n,c)=>{u(c||"")},renderInput:n=>e.jsx(S,{...n,label:"Artist",variant:"outlined"}),size:"small",freeSolo:!1,autoHighlight:!0})})})]})})},z=128,ge=({emoji:t})=>{const r=B();if(!t)return null;const i=()=>{r(`/view/${t.source}/${t.id.split(".")[0]}`)};return e.jsx(K,{arrow:!0,title:e.jsxs(e.Fragment,{children:[e.jsx(m,{color:"inherit",variant:"subtitle2",children:t.name}),e.jsxs(m,{variant:"caption",children:["Artist: ",t.artist]}),e.jsx("br",{})]}),children:e.jsx(g,{onClick:i,sx:{width:z,height:z,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:"pointer",padding:"4px","&:hover":{backgroundColor:"action.hover",transform:"scale(1.1)",zIndex:1},transition:"transform 0.1s ease-in-out, background-color 0.1s ease-in-out"},children:e.jsx("img",{src:`/dokimotes/emotes/${t.source}/${t.id}`,alt:t.name,loading:"lazy",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})})},je=x.memo(ge),w=16,N=128,be=t=>e.jsx(g,{...t,sx:{display:"grid",gridTemplateColumns:`repeat(auto-fill, minmax(${N+w}px, 1fr))`,gap:`${w/2}px`,padding:`${w/2}px`}}),ye=t=>e.jsx(g,{...t,sx:{display:"flex",justifyContent:"center",alignItems:"center",height:`${N+w}px`}}),ve=({emojis:t})=>e.jsx(g,{sx:{width:"100%",height:"100%"},children:e.jsx(_,{data:t,components:{List:be,Item:ye},itemContent:(r,i)=>e.jsx(je,{emoji:i})})}),Fe=(t,r,i,a,s)=>t.filter(o=>{const l=o.name.toLowerCase().includes(r.toLowerCase()),d=o.tags.some(p=>p!==""&&(p.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes(p.toLowerCase()))),u=r===""||l||d,n=i===v.ALL||o.type===i,c=a===F.ALL||o.source===a,h=s===""||o.artist===s;return u&&n&&c&&h}),we=({emojis:t,emptyText:r})=>{const i=I("(max-width:768px)"),a=I("(max-width:1229px)"),s=i?"100vw":a?"75vw":"50vw",{searchText:o,emojiType:l,emojiSource:d,artistFilter:u}=j($(h=>({searchText:h.searchText,emojiType:h.emojiType,emojiSource:h.emojiSource,artistFilter:h.artistFilter}))),n=x.useMemo(()=>{const h=new Set(t.map(p=>p.artist));return Array.from(h).sort()},[t]),c=x.useMemo(()=>Fe(t,o,l,d,u),[o,l,d,u,t]);return e.jsxs(f,{container:!0,direction:"column",minWidth:s,sx:{py:3,height:"100vh"},children:[e.jsx(f,{size:{xs:12},children:e.jsx(m,{variant:"h4",component:"h4",gutterBottom:!0,align:"center",sx:{mb:3},children:"Doki Emote Finder"})}),e.jsx(f,{size:{xs:12},children:e.jsx(fe,{artists:n})}),e.jsx(f,{size:{xs:12},sx:{flexGrow:1,display:"flex",flexDirection:"column",minHeight:0},children:e.jsx(g,{sx:{flexGrow:1,border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden",position:"relative"},children:c.length>0?e.jsx(ve,{emojis:c}):e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx(m,{children:r})})})}),e.jsx(f,{size:{xs:12},sx:{pt:2},children:e.jsxs(m,{variant:"caption",align:"center",sx:{mt:2},children:["Showing ",c.length," of ",t.length," emojis."]})})]})},Ie=({emoji:t})=>{const i=I("(max-width:768px)")?"90vw":"600px",[a,s]=x.useState({open:!1,message:""}),o=`/dokimotes/emotes/${t.source}/${t.id}`,l=`${t.name}-${t.id}`,d=t.credit.startsWith("https://"),u=t.id.endsWith(".gif"),n=async()=>{try{const L=await(await fetch(o)).blob();await navigator.clipboard.write([new ClipboardItem({[L.type]:L})]),s({open:!0,message:"Image copied to clipboard!"})}catch(p){s({open:!0,message:`Error: Could not copy image: ${p}.`})}},c=async()=>{try{const p=`${window.location.origin}${o}`;await navigator.clipboard.writeText(p),s({open:!0,message:"Image link copied to clipboard!"})}catch(p){s({open:!0,message:`Error: Could not copy image link: ${p}.`})}},h=()=>{s({...a,open:!1})};return e.jsxs(e.Fragment,{children:[e.jsxs(Q,{sx:{maxWidth:i,margin:{xs:"1rem auto",sm:"2rem auto"},boxShadow:3,width:"100%"},children:[e.jsx(q,{component:"img",image:o,alt:t.name,sx:{width:"100%",height:"auto",backgroundColor:"transparent"}}),e.jsxs(Z,{sx:{textAlign:"center"},children:[e.jsx(m,{gutterBottom:!0,variant:"h4",component:"h1",children:t.name}),e.jsxs(m,{variant:"body1",color:"text.secondary",component:"p",children:[e.jsx("strong",{children:"Artist:"})," ",t.artist]}),d?e.jsxs(m,{variant:"body1",color:"text.secondary",component:"p",children:[e.jsx("strong",{children:"Credits:"})," ",e.jsx("a",{href:t.credit,target:"_blank",style:{wordWrap:"break-word"},children:t.credit})]}):e.jsxs(m,{variant:"body1",color:"text.secondary",component:"p",children:[e.jsx("strong",{children:"Credits:"})," ",t.credit]}),e.jsxs(m,{variant:"body1",color:"text.secondary",component:"p",children:[e.jsx("strong",{children:"Tags:"})," ",t.tags.join(", ")]})]}),e.jsx(J,{sx:{justifyContent:"center",paddingBottom:"16px"},children:e.jsxs(g,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"},width:"100%"},children:[!u&&e.jsx(y,{variant:"contained",disabled:u,startIcon:e.jsx(X,{}),onClick:n,fullWidth:!0,children:"Copy Image"}),e.jsx(y,{variant:"contained",startIcon:e.jsx(A,{}),onClick:c,fullWidth:!0,children:"Copy Link"}),e.jsx(y,{variant:"outlined",startIcon:e.jsx(A,{}),fullWidth:!0,component:"a",href:o,download:l,children:"Download Image"}),e.jsx(y,{component:H,to:"/",variant:"contained",startIcon:e.jsx(Y,{}),color:"black",fullWidth:!0,children:"Back to Gallery"})]})})]}),e.jsx(R,{open:a.open,autoHideDuration:3e3,onClose:h,message:a.message,anchorOrigin:{vertical:"bottom",horizontal:"center"}})]})},Ce=({id:t,source:r})=>e.jsxs(e.Fragment,{children:[e.jsx(te,{sx:{fontSize:80,color:"text.secondary",marginBottom:2}}),e.jsx(m,{variant:"h4",component:"h1",gutterBottom:!0,children:"Dokimote Not Found"}),e.jsxs(m,{color:"text.secondary",sx:{maxWidth:400,mb:3},children:['That emote with ID "',t,'" and source "',r,'" does not seem to exist. It might have been removed or the link is incorrect.']}),e.jsx(y,{component:H,to:"/",variant:"contained",color:"secondary",children:"Back to Gallery"})]}),Le=({emojis:t,status:r})=>{const{source:i,id:a}=ee(),s=t.find(o=>o.id.includes(a)&&o.source===i);return e.jsx(g,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:r==="loading"?e.jsx(m,{children:"Loading"}):e.jsx(e.Fragment,{children:s===void 0?e.jsx(Ce,{id:a,source:i}):e.jsx(Ie,{emoji:s})})})},Se=(t=300*1e3)=>{const[r,i]=x.useState(!1),a=async()=>{try{const s=await fetch("/dokimotes/version.json",{cache:"no-store"});if(!s.ok)return;const o=await s.json();o.buildTime>1769704382443&&(console.log("Update available!",o.buildTime,1769704382443),i(!0))}catch(s){console.error("Failed to check for updates:",s)}};return x.useEffect(()=>{a();const s=setInterval(a,t);return()=>clearInterval(s)},[t]),{updateAvailable:r}},Te=()=>{const{updateAvailable:t}=Se(),r=B(),[i,a]=x.useState(!1),s=()=>{a(!0),r("/",{replace:!0}),setTimeout(()=>{window.location.reload(!0)},100)};return e.jsx(R,{open:t,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{width:"90%",maxWidth:500,top:{xs:"12px !important",sm:"24px !important"},left:"50% !important",transform:"translateX(-50%) !important"},children:e.jsxs(re,{severity:"info",variant:"filled",icon:!1,sx:{alignItems:"center",width:"100%",backgroundColor:"#17786E",backdropFilter:"blur(8px)",color:"#FFFFFF",fontWeight:500,boxShadow:"0 4px 20px rgba(0,0,0,0.4)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)"},action:e.jsx(y,{variant:"contained",size:"small",disabled:i,startIcon:i?e.jsx(ne,{size:20,color:"inherit"}):e.jsx(oe,{}),onClick:s,sx:{backgroundColor:"#FFFFFF",color:"black",borderRadius:"8px",textTransform:"none",fontWeight:"bold",px:2,whiteSpace:"nowrap",boxShadow:"0 2px 10px rgba(0,0,0,0.3)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0 4px 12px rgba(0,0,0,0.4)"}},children:i?"Updating...":"Update"}),children:[e.jsx(se,{children:"Update Available"}),"Refresh the page or click the update button to update the website."]})})},ke=()=>{const t=j(n=>n.theme);let i=I("(prefers-color-scheme: dark)")?M:D;t==="light"?i=D:t==="dark"&&(i=M);const[a,s]=x.useState([]),[o,l]=x.useState("loading"),d=o==="loading"?"Loading":o==="error"?"Error loading emoji's":"No emoji's found matching your criteria.",u=n=>{for(let c=n.length-1;c>0;c--){const h=Math.floor(Math.random()*(c+1));[n[c],n[h]]=[n[h],n[c]]}return n};return x.useEffect(()=>{me().then(n=>{if(n===void 0){l("error");return}else s(u(n)),l("ok")})},[]),e.jsxs(ie,{theme:i,children:[e.jsx(ae,{}),e.jsx(Te,{}),e.jsxs(le,{children:[e.jsx(E,{path:"/view/:source/:id",element:e.jsx(Le,{emojis:a,status:o})}),e.jsx(E,{path:"*",element:e.jsx(we,{emojis:a,emptyText:d})})]})]})};ce.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(de,{basename:"dokimotes",children:e.jsx(ke,{})})}));
